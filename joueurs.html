<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joueurs</title>
    <link rel="stylesheet" href="style.css">
    <script>
        let flemmardPercent = 50;
        let quetesBleues = [
            "skibidi (1)", "Quête bleue 2", "Quête bleue 3", "Quête bleue 4", 
            "Quête bleue 5", "Quête bleue 6", "Quête bleue 7", "Quête bleue 8", 
            "Quête bleue 9", "Quête bleue 10"
        ];
        let quetesRouges = [
            "Quête rouge 1", "Quête rouge 2", "Quête rouge 3", "Quête rouge 4", 
            "Quête rouge 5", "Quête rouge 6", "Quête rouge 7", "Quête rouge 8", 
            "Quête rouge 9", "Quête rouge 10"
        ];
        let quetesBleuesExplications = [
            "ampagnan?", "Explication de la quête bleue 2", "Explication de la quête bleue 3", 
            "Explication de la quête bleue 4", "Explication de la quête bleue 5", "Explication de la quête bleue 6", 
            "Explication de la quête bleue 7", "Explication de la quête bleue 8", "Explication de la quête bleue 9", 
            "Explication de la quête bleue 10"
        ];
        let quetesRougesExplications = [
            "Explication de la quête rouge 1", "Explication de la quête rouge 2", "Explication de la quête rouge 3", 
            "Explication de la quête rouge 4", "Explication de la quête rouge 5", "Explication de la quête rouge 6", 
            "Explication de la quête rouge 7", "Explication de la quête rouge 8", "Explication de la quête rouge 9", 
            "Explication de la quête rouge 10"
        ];
        
        let currentQuetes = ["", "", ""];
        let completedQuetes = [false, false, false];
        let isFlemmard = false;
        let timerActive = false;

        function updateCounter() {
            document.getElementById("flemmardValue").textContent = flemmardPercent + "%";
        }

        function increase() {
            if (flemmardPercent < 100) {
                flemmardPercent += 10;
                updateCounter();
            }
        }

        function decrease() {
            if (flemmardPercent > 0) {
                flemmardPercent -= 10;
                updateCounter();
            }
        }

        function startGame() {
            document.getElementById("setup").style.display = "none";
            document.getElementById("roleDisplay").style.display = "block";

            let randomChance = Math.floor(Math.random() * 10) + 1;
            isFlemmard = randomChance <= flemmardPercent / 10;

            let roleText = isFlemmard ? "Flemmard" : "Bosseur";
            let roleColor = isFlemmard ? "red" : "blue";

            document.getElementById("role").textContent = roleText;
            document.getElementById("role").style.color = roleColor;

            generateQuests();
        }

        function generateQuests() {
            let usedQuests = [];
            for (let i = 0; i < 3; i++) {
                let chance = Math.random();
                let isBlue = !isFlemmard && chance < 0.8;
                let queteList = isBlue ? quetesBleues : quetesRouges;
                let explicationList = isBlue ? quetesBleuesExplications : quetesRougesExplications;
                
                let randomIndex = Math.floor(Math.random() * queteList.length);
                let newQuete = queteList[randomIndex];
                let newExplication = explicationList[randomIndex];
                
                // Empêcher de sélectionner la même quête
                while (usedQuests.includes(newQuete)) {
                    randomIndex = Math.floor(Math.random() * queteList.length);
                    newQuete = queteList[randomIndex];
                    newExplication = explicationList[randomIndex];
                }
                
                usedQuests.push(newQuete);
                currentQuetes[i] = newQuete;
                completedQuetes[i] = false;

                let cell = document.getElementById(`quete${i}`);
                cell.textContent = currentQuetes[i];
                cell.style.backgroundColor = isBlue ? "blue" : "red";
                cell.style.textDecoration = "none"; // Réinitialisation de l'état "barré"
            }
        }

        function completeQuete(index) {
            completedQuetes[index] = true;
            document.getElementById(`quete${index}`).style.textDecoration = "line-through";
            checkAllCompleted();
        }

        function checkAllCompleted() {
            if (completedQuetes.every(q => q)) {
                document.getElementById("timer").style.display = "block";
                startTimer();
            }
        }

        function startTimer() {
            if (timerActive) return;
            timerActive = true;
            let timeLeft = 20;
            let timerElement = document.getElementById("timerValue");

            let interval = setInterval(() => {
                timerElement.textContent = timeLeft;
                if (timeLeft === 0) {
                    clearInterval(interval);
                    timerActive = false;
                    document.getElementById("timer").style.display = "none";
                    generateQuests();
                }
                timeLeft--;
            }, 1000);
        }

        function showDescription(index) {
            // Utilisation de l'indice pour obtenir la description appropriée
            let explication;
            if (currentQuetes[index].includes("bleue")) {
                // Si la quête est bleue, utilise la liste des explications des quêtes bleues
                let questIndex = quetesBleues.indexOf(currentQuetes[index]);
                explication = quetesBleuesExplications[questIndex];
            } else {
                // Si la quête est rouge, utilise la liste des explications des quêtes rouges
                let questIndex = quetesRouges.indexOf(currentQuetes[index]);
                explication = quetesRougesExplications[questIndex];
            }
            alert(currentQuetes[index] + " - " + explication);
        }
    </script>
</head>
<body>
    <div class="container" id="setup">
        <h1>% de Flemmards</h1>
        <button class="btn" onclick="decrease()">-</button>
        <span id="flemmardValue">50%</span>
        <button class="btn" onclick="increase()">+</button>
        <p><strong>Dans l'entreprise Quoicoub & skibidi, Il y a 2 types de gens: Les bosseurs et les flemmards. Vous aurrez chacun des tâches à compléter, pour les bosseurs ça sera des tâches qui feront avancer l'entreprise, mais pour les flemmards c'est complètement l'inverse!
        Votre but sera de ne pas vous faire repérer en tant que flemmard. Toutes les 10 minutes, il y aurra une réunion à la TV, vous devrez tous venir et nous choisirons 1 personne à virer de l'entreprise. La partie se termine quand il n'y a plus aucun bosseurs ou flemmards.</strong></p>
        <button class="btn" onclick="startGame()">Start</button>
    </div>
    
    <div class="container" id="roleDisplay" style="display: none;">
        <h1>Ton rôle :</h1>
        <h2 id="role"></h2>
        
        <h3>Quêtes :</h3>
        <table>
            <tr>
                <td id="quete0"></td>
                <td><button onclick="completeQuete(0)">✔️</button></td>
                <td><button onclick="showDescription(0)">❓</button></td>
            </tr>
            <tr>
                <td id="quete1"></td>
                <td><button onclick="completeQuete(1)">✔️</button></td>
                <td><button onclick="showDescription(1)">❓</button></td>
            </tr>
            <tr>
                <td id="quete2"></td>
                <td><button onclick="completeQuete(2)">✔️</button></td>
                <td><button onclick="showDescription(2)">❓</button></td>
            </tr>
        </table>
        <div id="timer" style="display: none;">
            <h3>Nouvelles quêtes dans : <span id="timerValue">20</span> secondes</h3>
        </div>
    </div>
</body>
</html>
