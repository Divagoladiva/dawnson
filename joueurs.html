<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joueurs</title>
    <link rel="stylesheet" href="style.css">
    <script>
        let flemmardPercent = 50;
        let quetesBleues = ["Exemple quête bleue 1", "Exemple quête bleue 2", "Exemple quête bleue 3", "Exemple quête bleue 4", "Exemple quête bleue 5", "Exemple quête bleue 6", "Exemple quête bleue 7", "Exemple quête bleue 8", "Exemple quête bleue 9", "Exemple quête bleue 10"];
        let quetesRouges = ["Exemple quête rouge 1", "Exemple quête rouge 2", "Exemple quête rouge 3", "Exemple quête rouge 4", "Exemple quête rouge 5", "Exemple quête rouge 6", "Exemple quête rouge 7", "Exemple quête rouge 8", "Exemple quête rouge 9", "Exemple quête rouge 10"];
        let currentQuetes = ["", "", ""];
        let completedQuetes = [false, false, false];
        let isFlemmard = false;
        let timerActive = false;
        
        function updateCounter() {
            document.getElementById("flemmardValue").textContent = flemmardPercent + "%";
        }
        
        function increase() {
            if (flemmardPercent < 100) {
                flemmardPercent += 10;
                updateCounter();
            }
        }
        
        function decrease() {
            if (flemmardPercent > 0) {
                flemmardPercent -= 10;
                updateCounter();
            }
        }
        
        function startGame() {
            document.getElementById("setup").style.display = "none";
            document.getElementById("roleDisplay").style.display = "block";
            
            let randomChance = Math.floor(Math.random() * 10) + 1;
            isFlemmard = randomChance <= flemmardPercent / 10;
            
            let roleText = isFlemmard ? "Flemmard" : "Bosseur";
            let roleColor = isFlemmard ? "red" : "blue";
            
            document.getElementById("role").textContent = roleText;
            document.getElementById("role").style.color = roleColor;
            
            generateQuests();
        }
        
        function generateQuests() {
            let usedQuests = [];
            for (let i = 0; i < 3; i++) {
                let chance = Math.random();
                let isBlue = !isFlemmard && chance < 0.8;
                let queteList = isBlue ? quetesBleues : quetesRouges;
                let newQuete;
                do {
                    newQuete = queteList[Math.floor(Math.random() * queteList.length)];
                } while (usedQuests.includes(newQuete));
                usedQuests.push(newQuete);
                
                currentQuetes[i] = newQuete;
                completedQuetes[i] = false;
                
                let cell = document.getElementById(`quete${i}`);
                cell.textContent = currentQuetes[i];
                cell.style.backgroundColor = isBlue ? "blue" : "red";
            }
        }
        
        function completeQuete(index) {
            completedQuetes[index] = true;
            document.getElementById(`quete${index}`).style.textDecoration = "line-through";
            checkAllCompleted();
        }
        
        function checkAllCompleted() {
            if (completedQuetes.every(q => q)) {
                document.getElementById("timer").style.display = "block";
                startTimer();
            }
        }
        
        function startTimer() {
            if (timerActive) return;
            timerActive = true;
            let timeLeft = 20;
            let timerElement = document.getElementById("timerValue");
            
            let interval = setInterval(() => {
                timerElement.textContent = timeLeft;
                if (timeLeft === 0) {
                    clearInterval(interval);
                    timerActive = false;
                    document.getElementById("timer").style.display = "none";
                    generateQuests();
                }
                timeLeft--;
            }, 1000);
        }
        
        function showDescription(index) {
            alert(currentQuetes[index] + " - Description de la quête");
        }
    </script>
</head>
<body>
    <div class="container" id="setup">
        <h1>% de Flemmards</h1>
        <button class="btn" onclick="decrease()">-</button>
        <span id="flemmardValue">50%</span>
        <button class="btn" onclick="increase()">+</button>
        <p><strong>Dans l'entreprise Quoicoub & Skibidi, il y a 2 types de gens : Les bosseurs et les flemmards...</strong></p>
        <button class="btn" onclick="startGame()">Start</button>
    </div>
    
    <div class="container" id="roleDisplay" style="display: none;">
        <h1>Ton rôle :</h1>
        <h2 id="role"></h2>
        
        <h3>Quêtes :</h3>
        <table>
            <tr>
                <td id="quete0"></td>
                <td><button onclick="completeQuete(0)">✔️</button></td>
                <td><button onclick="showDescription(0)">❓</button></td>
            </tr>
            <tr>
                <td id="quete1"></td>
                <td><button onclick="completeQuete(1)">✔️</button></td>
                <td><button onclick="showDescription(1)">❓</button></td>
            </tr>
            <tr>
                <td id="quete2"></td>
                <td><button onclick="completeQuete(2)">✔️</button></td>
                <td><button onclick="showDescription(2)">❓</button></td>
            </tr>
        </table>
        <div id="timer" style="display: none;">
            <h3>Nouvelles quêtes dans : <span id="timerValue">20</span> secondes</h3>
        </div>
    </div>
</body>
</html>
